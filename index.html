<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Homeopathy Symptom Checker</title>

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{background:#f1f5f9}
.panel{background:#ffffff;border-radius:16px;padding:24px;box-shadow:0 8px 22px rgba(0,0,0,.06)}
.card{background:#f8fafc;border-left:6px solid #2563eb;padding:16px;border-radius:12px;margin-top:14px}
.badge{background:#e0e7ff;color:#1e3a8a;padding:3px 8px;border-radius:999px;font-size:12px;margin:2px;display:inline-block}
.logo{
 width:48px;height:48px;border-radius:50%;
 background:linear-gradient(135deg,#2563eb,#16a34a);
 color:#fff;font-weight:bold;font-size:20px;
 display:flex;align-items:center;justify-content:center
}
.hidden{display:none}
</style>
</head>

<body class="min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-white shadow">
 <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
  <div class="flex items-center gap-3">
   <div class="logo">H+</div>
   <div>
    <h1 id="title" class="text-xl font-extrabold text-blue-700">
     Homeopathy Symptom Checker
    </h1>
    <p class="text-xs text-gray-500">Patient self-assessment (doctor approval required)</p>
   </div>
  </div>
  <button onclick="toggleLang()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">
   üåê English / ‡§π‡§ø‡§Ç‡§¶‡•Ä
  </button>
 </div>
</header>

<!-- MAIN -->
<main class="max-w-6xl mx-auto px-6 py-8 grid grid-cols-1 md:grid-cols-2 gap-6">

<!-- LEFT : SYMPTOMS -->
<section class="panel">
 <h2 id="symTitle" class="font-bold text-lg mb-3">üîç Enter Your Symptoms</h2>

 <div class="flex gap-2">
  <textarea id="symptomInput" class="border rounded-xl p-3 w-full h-28"
   placeholder="fever, headache, anxiety, burning"></textarea>
  <button onclick="voiceInput('symptom')" class="bg-green-600 text-white px-3 rounded-xl">üé§</button>
 </div>

 <button onclick="searchMedicine()" class="mt-4 bg-blue-600 text-white py-2 rounded-xl w-full">
  Analyze Symptoms
 </button>

 <div id="medicineResult"></div>
</section>

<!-- RIGHT : PATIENT FORM -->
<section class="panel">
 <h2 id="patTitle" class="font-bold text-lg mb-3">üìù Patient Details</h2>

 <input id="pname" class="border p-3 rounded-xl w-full mb-2" placeholder="Full Name">
 <input id="page" class="border p-3 rounded-xl w-full mb-2" placeholder="Age">
 <input id="pmobile" class="border p-3 rounded-xl w-full mb-2" placeholder="Mobile Number">

 <textarea id="paddress" class="border p-3 rounded-xl w-full mb-2"
  placeholder="Address"></textarea>

 <label id="compLabel" class="font-semibold text-sm">Complaint</label>
 <div class="flex gap-2 mt-1">
  <textarea id="pcomplaint" class="border p-3 rounded-xl w-full h-24"
   placeholder="Describe your problem"></textarea>
  <button onclick="voiceInput('complaint')" class="bg-green-600 text-white px-3 rounded-xl">üé§</button>
 </div>

 <button onclick="submitCase()" class="mt-4 bg-green-600 text-white py-2 rounded-xl w-full">
  Submit to Doctor
 </button>
</section>

</main>

<!-- FOOTER -->
<footer id="disclaimer" class="bg-white border-t mt-auto text-xs text-gray-500 text-center p-4">
 ‚ö† This tool provides preliminary homeopathic suggestions only.
 Final medicine selection must be done by a qualified homeopathic physician.
</footer>

<script>
/* ================= LANGUAGE ================= */
let lang="en";
function toggleLang(){
 lang = lang==="en" ? "hi" : "en";
 title.innerText = lang==="en"
  ? "Homeopathy Symptom Checker"
  : "‡§π‡•ã‡§Æ‡•ç‡§Ø‡•ã‡§™‡•à‡§•‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§ú‡§æ‡§Ç‡§ö ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä";
 symTitle.innerText = lang==="en" ? "üîç Enter Your Symptoms" : "üîç ‡§Ö‡§™‡§®‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§≤‡§ø‡§ñ‡•á‡§Ç";
 patTitle.innerText = lang==="en" ? "üìù Patient Details" : "üìù ‡§∞‡•ã‡§ó‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£";
 compLabel.innerText = lang==="en" ? "Complaint" : "‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§";
 symptomInput.placeholder = lang==="en" ? "fever, headache, anxiety" : "‡§¨‡•Å‡§ñ‡§æ‡§∞, ‡§∏‡§ø‡§∞ ‡§¶‡§∞‡•ç‡§¶, ‡§ò‡§¨‡§∞‡§æ‡§π‡§ü";
 pcomplaint.placeholder = lang==="en" ? "Describe your problem" : "‡§Ö‡§™‡§®‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§¨‡§§‡§æ‡§è‡§Ç";
 disclaimer.innerText = lang==="en"
  ? "‚ö† This tool provides preliminary homeopathic suggestions only. Final medicine selection must be done by a qualified homeopathic physician."
  : "‚ö† ‡§Ø‡§π ‡§â‡§™‡§ï‡§∞‡§£ ‡§ï‡•á‡§µ‡§≤ ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠‡§ø‡§ï ‡§π‡•ã‡§Æ‡•ç‡§Ø‡•ã‡§™‡•à‡§•‡§ø‡§ï ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§¶‡§µ‡§æ ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§ï ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§";
}

/* ================= VOICE ================= */
function voiceInput(target){
 const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
 if(!SR){ alert("Voice not supported"); return; }
 const rec = new SR();
 rec.lang = lang==="hi" ? "hi-IN" : "en-IN";
 rec.start();
 rec.onresult = e=>{
  const text = e.results[0][0].transcript;
  if(target==="symptom") symptomInput.value = text;
  if(target==="complaint") pcomplaint.value = text;
 };
}

/* ================= MEDICINES DATABASE ================= */
const medicines=[
{
 name:"Belladonna",
 keys:["fever","headache","throbbing","heat"],
 keynotes:["Sudden onset","High fever","Throbbing pain","Red face","Heat","Sensitivity to light"]
},
{
 name:"Aconitum Napellus",
 keys:["fear","anxiety","cold","sudden"],
 keynotes:["Sudden illness","Fear of death","Restlessness","After cold exposure","Dry skin"]
},
{
 name:"Bryonia",
 keys:["pain","movement","dry","thirst"],
 keynotes:["Pain worse by motion","Dryness","Great thirst","Better rest","Irritable"]
},
{
 name:"Rhus Toxicodendron",
 keys:["joint","stiff","rest","movement"],
 keynotes:["Stiff after rest","Better by motion","Restless","Damp weather aggravation"]
},
{
 name:"Arsenicum Album",
 keys:["burning","weak","anxiety","restless"],
 keynotes:["Burning pains","Great weakness","Anxiety","Fastidious","Better warmth"]
},
{
 name:"Pulsatilla",
 keys:["cold","yellow","changeable","mild"],
 keynotes:["Mild temperament","Changeable symptoms","Yellow discharge","Better open air"]
}
];

let suggested=[];

/* ================= SEARCH ================= */
function searchMedicine(){
 const text=symptomInput.value.toLowerCase();
 medicineResult.innerHTML="";
 suggested=[];

 medicines.forEach(m=>{
  let matched=[];
  m.keys.forEach(k=>{ if(text.includes(k)) matched.push(k); });
  if(matched.length){
   suggested.push({...m,matched});
  }
 });

 suggested.sort((a,b)=>b.matched.length-a.matched.length);
 suggested = suggested.slice(0,6); // ‚úÖ at least 6

 suggested.forEach((m,i)=>{
  medicineResult.innerHTML+=`
   <div class="card">
    <b>${i+1}. ${m.name}</b><br>
    <div class="mt-1 text-sm">
     <b>Matched Symptoms:</b><br>
     ${m.matched.map(x=>`<span class="badge">${x}</span>`).join("")}
    </div>
    <div class="mt-2 text-sm">
     <b>Keynote Symptoms:</b>
     <ul class="list-disc ml-5 mt-1">
      ${m.keynotes.map(k=>`<li>${k}</li>`).join("")}
     </ul>
    </div>
   </div>
  `;
 });
}

/* ================= SUBMIT PDF ================= */
function submitCase(){
 if(!pname.value || !pmobile.value){
  alert("Please fill patient details");
  return;
 }
 const {jsPDF}=window.jspdf;
 const doc=new jsPDF();
 let y=20;

 doc.setFontSize(16);
 doc.text("Patient Case Submission",20,y); y+=10;

 doc.setFontSize(11);
 doc.text(`Name: ${pname.value}`,20,y); y+=6;
 doc.text(`Age: ${page.value}`,20,y); y+=6;
 doc.text(`Mobile: ${pmobile.value}`,20,y); y+=6;
 doc.text(`Address: ${paddress.value}`,20,y); y+=8;

 doc.text("Symptoms:",20,y); y+=6;
 doc.text(symptomInput.value,20,y); y+=10;

 doc.text("Complaint:",20,y); y+=6;
 doc.text(pcomplaint.value,20,y); y+=10;

 doc.text("Suggested Medicines (Symptom-based):",20,y); y+=6;
 suggested.forEach((m,i)=>{
  doc.text(`${i+1}. ${m.name}`,25,y);
  y+=6;
 });

 doc.setFontSize(9);
 doc.text("Final medicine selection to be done by doctor.",20,280);

 doc.save(`Patient_${Date.now()}.pdf`);
 alert("Your case has been submitted to doctor.");
}
</script>

</body>
</html>
