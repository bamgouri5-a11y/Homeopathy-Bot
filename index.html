<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ¿ Dr. Bhavna Homeopathy System</title>

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{background:#eef4fb}
.card{background:#f8fafc;border-left:5px solid #2563eb;padding:12px;border-radius:10px;margin-top:12px}
.logoBox{width:50px;height:50px;border-radius:8px;overflow:hidden}
</style>
</head>

<body class="min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-white shadow p-4 flex items-center gap-3">
 <div class="logoBox">
  <img id="clinicLogo" class="w-full h-full object-cover hidden">
 </div>
 <h1 class="text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-green-600">
  Dr. Bhavna Homeopathy System
 </h1>
</header>

<!-- DOCTOR LOGIN -->
<section class="max-w-3xl mx-auto mt-6 bg-gray-100 p-4 rounded shadow">
 <h2 class="font-bold text-red-600 mb-2">ğŸ” Doctor Login</h2>
 <input id="docUser" class="border p-2 w-full mb-2 rounded" placeholder="Username">
 <input id="docPass" type="password" class="border p-2 w-full mb-2 rounded" placeholder="Password">
 <button onclick="doctorLogin()" class="bg-red-600 text-white py-2 rounded w-full">Login</button>
</section>

<!-- BRANDING -->
<section id="branding" class="max-w-3xl mx-auto mt-6 bg-white p-4 rounded shadow hidden">
 <h2 class="font-bold mb-2">ğŸ¥ Clinic Branding</h2>
 <input type="file" accept="image/*" onchange="uploadLogo(event)">
</section>

<!-- SEARCH -->
<section class="max-w-3xl mx-auto mt-6 bg-white p-5 rounded shadow">
 <h2 class="font-bold mb-2">ğŸ” Search Medicine</h2>
 <input id="symptomInput" class="border p-2 w-full rounded mb-2" placeholder="Enter symptoms">
 <button onclick="searchMedicine()" class="bg-blue-600 text-white py-2 rounded w-full">Search</button>
 <div id="medicineResult"></div>
</section>

<!-- APPOINTMENT -->
<section class="max-w-3xl mx-auto mt-6 bg-white p-5 rounded shadow">
 <h2 class="font-bold mb-2">ğŸ“ Patient Details</h2>
 <input id="pname" class="border p-2 w-full mb-2 rounded" placeholder="Patient Name">
 <input id="page" class="border p-2 w-full mb-2 rounded" placeholder="Age">
 <select id="ptype" class="border p-2 w-full mb-2 rounded">
  <option value="acute">Acute</option>
  <option value="chronic">Chronic</option>
 </select>
 <textarea id="pcomplaint" class="border p-2 w-full mb-2 rounded" placeholder="Main Complaint"></textarea>

 <button onclick="generatePDF()" class="bg-purple-600 text-white py-2 rounded w-full">
  ğŸ“„ Generate Prescription PDF
 </button>
</section>

<!-- FOOTER -->
<footer class="mt-auto bg-white text-center text-xs text-gray-500 p-4">
 âš  Disclaimer: Educational support only. Final prescription by qualified homeopathic physician.
</footer>

<script>
/* ================= DOCTOR LOGIN ================= */
let doctorName="Dr. Bhavna";
function doctorLogin(){
 if(docUser.value==="doctor" && docPass.value==="doctor123"){
  doctorName="Dr. Bhavna (Homeopath)";
  branding.classList.remove("hidden");
  alert("Doctor logged in");
 } else alert("Invalid credentials");
}

/* ================= LOGO UPLOAD ================= */
function uploadLogo(e){
 const file=e.target.files[0];
 const reader=new FileReader();
 reader.onload=()=>{
  localStorage.setItem("clinicLogo",reader.result);
  clinicLogo.src=reader.result;
  clinicLogo.classList.remove("hidden");
 };
 reader.readAsDataURL(file);
}
const savedLogo=localStorage.getItem("clinicLogo");
if(savedLogo){clinicLogo.src=savedLogo;clinicLogo.classList.remove("hidden");}

/* ================= MEDICINES ================= */
const medicines=[
 {name:"Belladonna",keywords:["fever","headache"],type:"acute"},
 {name:"Aconitum",keywords:["fever","fear"],type:"acute"},
 {name:"Bryonia",keywords:["pain","movement"],type:"acute"},
 {name:"Rhus Tox",keywords:["joint","stiff"],type:"chronic"},
 {name:"Arsenicum",keywords:["burning","weak"],type:"chronic"}
];

let lastResults=[];

/* ================= SEARCH ================= */
function searchMedicine(){
 const text=symptomInput.value.toLowerCase();
 medicineResult.innerHTML="";
 lastResults=medicines.map(m=>{
  let score=0;
  m.keywords.forEach(k=>{if(text.includes(k))score++});
  return {...m,score};
 }).sort((a,b)=>b.score-a.score).slice(0,5);

 lastResults.forEach((m,i)=>{
  medicineResult.innerHTML+=`
   <div class="card">
    <b>${i+1}. ${m.name}</b><br>
    Potency: ${suggestPotency(m)}<br>
    Dosage: ${suggestDosage()}
   </div>`;
 });
}

/* ================= DOSAGE LOGIC ================= */
function suggestPotency(m){
 if(ptype.value==="acute") return "30C";
 return "200C";
}
function suggestDosage(){
 return "3 pills, 2 times daily";
}

/* ================= PDF ================= */
function generatePDF(){
 const {jsPDF}=window.jspdf;
 const doc=new jsPDF();
 let y=20;

 if(savedLogo){
  doc.addImage(savedLogo,"PNG",20,10,30,30);
  y=50;
 }

 doc.setFontSize(16);
 doc.text("Homeopathic Prescription",70,25);
 doc.setFontSize(11);
 doc.text(`Doctor: ${doctorName}`,20,y);
 y+=7;
 doc.text(`Patient: ${pname.value}`,20,y); y+=7;
 doc.text(`Age: ${page.value}`,20,y); y+=7;
 doc.text(`Complaint: ${pcomplaint.value}`,20,y); y+=10;

 doc.text("Medicines:",20,y); y+=7;
 lastResults.forEach((m,i)=>{
  doc.text(`${i+1}. ${m.name} ${suggestPotency(m)} â€“ ${suggestDosage()}`,20,y);
  y+=6;
 });

 doc.setFontSize(9);
 doc.text("Signature:",20,270);
 doc.text(doctorName,50,270);
 doc.text("Educational support only.",20,280);
 doc.save("Prescription.pdf");
}
</script>

</body>
</html>
