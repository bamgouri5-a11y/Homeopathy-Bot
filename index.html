<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dr. Bhavna – Professional Homeopathy Assistant</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial, sans-serif;background:#eef4fb;margin:0}
header{background:#0f4c75;color:#fff;padding:15px;display:flex;align-items:center}
header img{height:45px;margin-right:12px}
.container{padding:20px}
input,button{padding:10px;margin:5px;width:100%}
button{background:#0f4c75;color:#fff;border:none;cursor:pointer}
button:hover{background:#083358}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:15px}
.card{background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
.card h3{margin:0;color:#0f4c75}
.hidden{display:none}
.admin-box{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px}
small{color:#555}
</style>
</head>

<body>

<header>
<img src="https://i.imgur.com/6XKJZzL.png" alt="Doctor Logo">
<h2>Dr. Bhavna – Professional Homeopathy Assistant</h2>
</header>

<div class="container">

<!-- ADMIN LOGIN -->
<div class="admin-box">
<h3>Doctor Login</h3>
<input type="password" id="adminPass" placeholder="Enter Admin Password">
<button onclick="loginAdmin()">Login</button>
<p id="loginStatus"></p>
</div>

<!-- PATIENT DETAILS (ADMIN ONLY) -->
<div id="patientSection" class="admin-box hidden">
<h3>Patient Details</h3>
<input placeholder="Patient Name">
<input placeholder="Age">
<input placeholder="Complaint">
<button onclick="generatePDF()">Generate PDF</button>
</div>

<!-- CSV UPLOAD -->
<div class="admin-box">
<h3>Load Medicines CSV</h3>
<input type="file" accept=".csv" onchange="loadCSV(event)">
</div>

<!-- MEDICINE RESULTS -->
<div id="medicineGrid" class="grid"></div>

</div>

<script>
let isAdmin = false;
let medicines = [];

function loginAdmin(){
  const pass = document.getElementById("adminPass").value;
  if(pass === "admin123"){
    isAdmin = true;
    document.getElementById("loginStatus").innerText = "Doctor logged in";
    document.getElementById("patientSection").classList.remove("hidden");
  }else{
    document.getElementById("loginStatus").innerText = "Invalid password";
  }
}

function loadCSV(event){
  const file = event.target.files[0];
  const reader = new FileReader();
  reader.onload = e => parseCSV(e.target.result);
  reader.readAsText(file);
}

function parseCSV(data){
  const rows = data.split("\n").slice(1);
  medicines = rows.map(r=>{
    const c = r.split(",");
    return {
      name:c[0],
      keynotes:c[1],
      indications:c[2],
      modalities:c[3],
      mind:c[4]
    };
  }).slice(0,6); // minimum 6 medicines
  renderMedicines();
}

function renderMedicines(){
  const grid = document.getElementById("medicineGrid");
  grid.innerHTML = "";
  medicines.forEach(m=>{
    grid.innerHTML += `
      <div class="card">
        <h3>${m.name}</h3>
        <p><b>Key-notes:</b> ${m.keynotes}</p>
        <p><b>Indications:</b> ${m.indications}</p>
        <p><b>Modalities:</b> <i>${m.modalities}</i></p>
        <small><b>Mind:</b> ${m.mind}</small>
      </div>`;
  });
}

function generatePDF(){
  alert("PDF generation allowed only for logged-in doctor (backend / jsPDF can be added)");
}
</script>

</body>
</html>
