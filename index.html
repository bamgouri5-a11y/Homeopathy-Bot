<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dr. Bhavna – Appointment System</title>

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.3/dist/tailwind.min.css" rel="stylesheet"/>

<style>
body{background:#eef4fb}
.hidden{display:none}
</style>
</head>

<body class="min-h-screen flex flex-col">

<!-- HEADER -->
<div class="bg-white p-4 shadow text-center">
  <h1 class="text-xl font-bold text-blue-700">
    Dr. Bhavna – Homeopathy Appointment System
  </h1>
  <p class="text-xs text-gray-500">
    Patient Complaint Registration
  </p>
</div>

<!-- APPOINTMENT FORM -->
<div class="max-w-3xl mx-auto mt-6 bg-white p-4 rounded shadow">
  <h3 class="font-bold text-gray-700 mb-3">
    Patient Appointment / Complaint Form
  </h3>

  <input id="pname" class="border p-2 w-full mb-2 rounded" placeholder="Patient Name">
  <input id="page" class="border p-2 w-full mb-2 rounded" placeholder="Age">
  <input id="pmobile" class="border p-2 w-full mb-2 rounded" placeholder="Mobile Number">
  <textarea id="pcomplaint" class="border p-2 w-full mb-2 rounded"
    placeholder="Describe main complaint"></textarea>

  <button onclick="saveComplaint()"
    class="bg-green-600 text-white px-4 py-2 rounded w-full">
    Submit Appointment
  </button>

  <p id="successMsg" class="text-green-600 text-sm mt-2 hidden">
    ✔ Appointment saved successfully
  </p>
</div>

<!-- ADMIN LOGIN -->
<div class="max-w-3xl mx-auto mt-6 bg-gray-100 p-4 rounded shadow">
  <h3 class="font-bold text-red-700 mb-2">Admin Login</h3>

  <input id="adminUser" class="border p-2 w-full mb-2 rounded"
    placeholder="Username">
  <input id="adminPass" type="password"
    class="border p-2 w-full mb-2 rounded"
    placeholder="Password">

  <button onclick="adminLogin()"
    class="bg-red-600 text-white px-4 py-2 rounded w-full">
    Login
  </button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel"
  class="max-w-3xl mx-auto mt-6 bg-white p-4 rounded shadow hidden">

  <h3 class="font-bold text-gray-700 mb-2">
    Admin Panel
  </h3>

  <button onclick="downloadCSV()"
    class="bg-blue-600 text-white px-4 py-2 rounded w-full">
    Download Patient Complaints (CSV)
  </button>
</div>

<!-- FOOTER -->
<footer class="mt-auto bg-white p-4 text-center text-xs text-gray-600">
  This system stores data locally in browser for demonstration purposes only.
</footer>

<script>
/* ================= DATA STORAGE ================= */
let complaints=[];

/* ================= SAVE APPOINTMENT ================= */
function saveComplaint(){
  const name=document.getElementById("pname").value;
  const age=document.getElementById("page").value;
  const mobile=document.getElementById("pmobile").value;
  const complaint=document.getElementById("pcomplaint").value;

  if(!name||!mobile||!complaint){
    alert("Please fill required fields");
    return;
  }

  complaints.push({
    name,age,mobile,complaint,
    date:new Date().toLocaleString()
  });

  document.getElementById("successMsg").classList.remove("hidden");

  document.getElementById("pname").value="";
  document.getElementById("page").value="";
  document.getElementById("pmobile").value="";
  document.getElementById("pcomplaint").value="";
}

/* ================= ADMIN LOGIN ================= */
function adminLogin(){
  const u=document.getElementById("adminUser").value;
  const p=document.getElementById("adminPass").value;

  if(u==="admin" && p==="admin123"){
    document.getElementById("adminPanel").classList.remove("hidden");
    alert("Admin login successful");
  }else{
    alert("Invalid admin credentials");
  }
}

/* ================= CSV DOWNLOAD ================= */
function downloadCSV(){
  if(!complaints.length){
    alert("No patient data available");
    return;
  }

  let csv="Name,Age,Mobile,Complaint,Date\n";
  complaints.forEach(c=>{
    csv+=`${c.name},${c.age},${c.mobile},"${c.complaint}",${c.date}\n`;
  });

  const blob=new Blob([csv],{type:"text/csv"});
  const url=URL.createObjectURL(blob);

  const a=document.createElement("a");
  a.href=url;
  a.download="patient_complaints.csv";
  a.click();
  URL.revokeObjectURL(url);
}
</script>

</body>
</html>
