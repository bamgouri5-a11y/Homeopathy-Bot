<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Homeopathy Doctor Reply System</title>

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{background:#f1f5f9}
.panel{background:#fff;border-radius:14px;padding:24px;box-shadow:0 8px 20px rgba(0,0,0,.06)}
.hidden{display:none}
</style>
</head>

<body class="min-h-screen flex flex-col">

<header class="bg-white shadow">
 <div class="max-w-4xl mx-auto px-6 py-4 text-center">
  <h1 class="text-2xl font-bold text-blue-700">
   Doctor Reply & Notification Panel
  </h1>
 </div>
</header>

<!-- LOGIN -->
<section class="max-w-4xl mx-auto px-6 py-8">
 <div class="panel">
  <h2 class="font-bold text-red-600 mb-3">üîê Doctor Login</h2>
  <input id="adminUser" class="border p-3 w-full mb-2 rounded-lg" placeholder="Username">
  <input id="adminPass" type="password" class="border p-3 w-full mb-2 rounded-lg" placeholder="Password">
  <button onclick="adminLogin()" class="bg-red-600 text-white py-2 rounded-lg w-full">
   Login
  </button>
 </div>
</section>

<!-- DOCTOR PANEL -->
<section id="doctorPanel" class="max-w-4xl mx-auto px-6 pb-10 hidden">
 <div class="panel">

  <h2 class="font-bold text-lg mb-4">üßæ Doctor Reply (Prescription)</h2>

  <!-- Patient info (manual entry from received PDF) -->
  <input id="rp_name" class="border p-3 rounded-lg w-full mb-2" placeholder="Patient Name">
  <input id="rp_mobile" class="border p-3 rounded-lg w-full mb-2" placeholder="Patient Mobile Number">

  <hr class="my-3">

  <!-- Prescription -->
  <input id="rp_medicine" class="border p-3 rounded-lg w-full mb-2" placeholder="Final Medicine">
  <input id="rp_potency" class="border p-3 rounded-lg w-full mb-2" placeholder="Potency (e.g. 30C)">
  <input id="rp_dosage" class="border p-3 rounded-lg w-full mb-2" placeholder="Dosage (e.g. 3 pills twice daily)">

  <textarea id="rp_advice" class="border p-3 rounded-lg w-full h-24 mb-3"
   placeholder="Doctor Advice"></textarea>

  <button onclick="generateReplyPDF()" class="bg-purple-600 text-white py-2 rounded-lg w-full">
   üìÑ Generate Doctor Reply PDF
  </button>

  <!-- NOTIFICATION -->
  <div class="mt-6 border-t pt-4">
   <h3 class="font-semibold mb-2">üîî Notify Patient</h3>

   <button onclick="sendWhatsApp()" class="bg-green-600 text-white py-2 rounded-lg w-full mb-2">
    üì≤ Send WhatsApp
   </button>

   <button onclick="sendSMS()" class="bg-blue-600 text-white py-2 rounded-lg w-full">
    üì© Send SMS
   </button>
  </div>

 </div>
</section>

<footer class="bg-white border-t mt-auto text-xs text-gray-500 text-center p-4">
 ‚ö† This system assists communication only. Prescription validity lies with doctor.
</footer>

<script>
/* ========== LOGIN ========== */
function adminLogin(){
 if(adminUser.value==="admin" && adminPass.value==="admin123"){
  doctorPanel.classList.remove("hidden");
  alert("Doctor logged in");
 } else alert("Invalid credentials");
}

/* ========== DOCTOR REPLY PDF ========== */
function generateReplyPDF(){
 const {jsPDF}=window.jspdf;
 const doc=new jsPDF();
 let y=20;

 doc.setFontSize(16);
 doc.text("Doctor Reply / Prescription",20,y); y+=12;

 doc.setFontSize(11);
 doc.text(`Patient Name: ${rp_name.value}`,20,y); y+=6;
 doc.text(`Mobile: ${rp_mobile.value}`,20,y); y+=8;

 doc.text(`Medicine: ${rp_medicine.value}`,20,y); y+=6;
 doc.text(`Potency: ${rp_potency.value}`,20,y); y+=6;
 doc.text(`Dosage: ${rp_dosage.value}`,20,y); y+=8;

 doc.text("Doctor Advice:",20,y); y+=6;
 doc.text(rp_advice.value,20,y); y+=10;

 doc.setFontSize(9);
 doc.text("Issued by qualified homeopathic physician.",20,280);

 doc.save(`Doctor_Reply_${Date.now()}.pdf`);
}

/* ========== WHATSAPP ========== */
function sendWhatsApp(){
 const msg =
`Hello ${rp_name.value},
Your homeopathic prescription is ready.

Medicine: ${rp_medicine.value}
Potency: ${rp_potency.value}
Dosage: ${rp_dosage.value}

Please check the PDF sent by doctor.`;

 const url = `https://wa.me/91${rp_mobile.value}?text=${encodeURIComponent(msg)}`;
 window.open(url,"_blank");
}

/* ========== SMS ========== */
function sendSMS(){
 const msg =
`Prescription Ready:
${rp_medicine.value} ${rp_potency.value}
${rp_dosage.value}

- Doctor`;

 window.location.href = `sms:${rp_mobile.value}?body=${encodeURIComponent(msg)}`;
}
</script>

</body>
</html>
