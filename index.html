<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dr. Bhavna â€“ Homeopathy System</title>

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.3/dist/tailwind.min.css" rel="stylesheet"/>

<style>
body{background:#eef4fb}
.hidden{display:none}
.chat{height:45vh;overflow-y:auto}
.row{display:flex;gap:10px;margin-bottom:12px;max-width:85%}
.bot{align-self:flex-start}
.user{align-self:flex-end;flex-direction:row-reverse}
.avatar{width:38px;height:38px;border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-weight:bold;color:#fff}
.botA{background:#16a34a}
.userA{background:#2563eb}
.bubble{background:#fff;padding:12px;border-radius:14px;font-size:14px}
.card{border-left:4px solid #2563eb;background:#f8fafc;
padding:10px;border-radius:10px;margin-top:8px}
</style>
</head>

<body class="min-h-screen flex flex-col">

<!-- HEADER -->
<div class="bg-white p-4 shadow text-center">
  <h1 class="text-xl font-bold text-blue-700">
    Dr. Bhavna â€“ Homeopathy Consultation System
  </h1>
  <p class="text-xs text-gray-500">
    Classical Homeopathy â€¢ Clinical Decision Support
  </p>
</div>

<!-- CHAT -->
<div id="chat" class="chat max-w-3xl mx-auto p-4 flex flex-col"></div>

<!-- CHAT INPUT -->
<div class="bg-white p-4 shadow max-w-3xl mx-auto w-full">
  <input id="msg" class="border rounded w-full px-3 py-2 mb-2"
  placeholder="Describe symptoms in detailâ€¦">

  <div class="flex justify-between items-center gap-2">
    <div class="space-x-2">
      <button id="ask" class="bg-blue-600 text-white px-4 py-2 rounded">Ask Doctor</button>
      <button id="clear" class="bg-red-500 text-white px-4 py-2 rounded">Clear</button>
    </div>
    <button id="mic" class="bg-green-600 text-white px-4 py-2 rounded">ðŸŽ¤ Speak</button>
  </div>
</div>

<!-- ADMIN LOGIN -->
<div class="max-w-3xl mx-auto mt-6 bg-gray-100 p-4 rounded shadow">
<h3 class="font-bold text-red-700 mb-2">Doctor / Admin Login</h3>
<input id="adminUser" class="border p-2 w-full mb-2 rounded" placeholder="Login">
<input id="adminPass" type="password" class="border p-2 w-full mb-2 rounded" placeholder="Password">
<button onclick="adminLogin()" class="bg-red-600 text-white px-4 py-2 rounded w-full">
Login
</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden max-w-3xl mx-auto mt-6 bg-white p-4 rounded shadow">
<h3 class="font-bold mb-2">Admin Panel</h3>

<!-- CHANGE PASSWORD -->
<div class="mb-4">
  <h4 class="font-semibold mb-1">Change Admin Password</h4>
  <input id="oldPass" type="password" class="border p-2 w-full mb-2 rounded" placeholder="Old Password">
  <input id="newPass" type="password" class="border p-2 w-full mb-2 rounded" placeholder="New Password">
  <button onclick="changePassword()" class="bg-purple-600 text-white px-4 py-2 rounded w-full">
    Update Password
  </button>
</div>
</div>

<footer class="mt-auto bg-white p-4 text-center text-xs text-gray-600">
<strong>Disclaimer:</strong> Informational support only.
</footer>

<script>
/* ================= SECURITY ================= */
let admin=false;

/* DEFAULT HASH (Bhavna@123) */
let storedHash =
"0e7f2e1a0b69d31d3f98b2d1d2fda9b1a7e9f0fbd8b8c1c74e9d5e6d4f2f6b6c";

async function hash(text){
 const enc=new TextEncoder().encode(text);
 const buf=await crypto.subtle.digest("SHA-256",enc);
 return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

/* ================= CHAT ================= */
const chat=document.getElementById("chat");
const msg=document.getElementById("msg");

function add(type,text){
 const r=document.createElement("div");r.className="row "+type;
 const a=document.createElement("div");a.className="avatar "+(type=="bot"?"botA":"userA");
 a.innerText=type=="bot"?"Dr":"You";
 const b=document.createElement("div");b.className="bubble";b.innerText=text;
 r.append(a,b);chat.appendChild(r);chat.scrollTop=chat.scrollHeight;
}

add("bot",
"ðŸ™ Welcome to Dr. Bhavnaâ€™s Homeopathy Consultation System.\n" +
"You may type or use ðŸŽ¤ voice input."
);

/* ================= MIC ================= */
const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
if(SR){
 const r=new SR();r.lang="en-IN";
 mic.onclick=()=>r.start();
 r.onresult=e=>msg.value=e.results[0][0].transcript;
}

/* ================= ADMIN LOGIN ================= */
async function adminLogin(){
 if(adminUser.value!=="Bhavna"){alert("Invalid login");return;}
 const inputHash=await hash(adminPass.value);
 if(inputHash===storedHash){
  admin=true;
  adminPanel.classList.remove("hidden");
  alert("Admin logged in");
 }else alert("Wrong password");
}

/* ================= CHANGE PASSWORD ================= */
async function changePassword(){
 if(!admin)return;
 const oldH=await hash(oldPass.value);
 if(oldH!==storedHash){alert("Old password incorrect");return;}
 storedHash=await hash(newPass.value);
 oldPass.value=newPass.value="";
 alert("Password updated successfully");
}
</script>

</body>
</html>
