<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dr. Bhavna – Homeopathy Clinical System</title>

<!-- Tailwind -->
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{background:#eef4fb}
.chat{height:40vh;overflow-y:auto}
.row{display:flex;gap:10px;margin-bottom:12px;max-width:85%}
.bot{align-self:flex-start}
.user{align-self:flex-end;flex-direction:row-reverse}
.avatar{
 width:38px;height:38px;border-radius:50%;
 display:flex;align-items:center;justify-content:center;
 font-weight:bold;color:#fff
}
.botA{background:#16a34a}
.userA{background:#2563eb}
.bubble{background:#fff;padding:12px;border-radius:14px;font-size:14px}
</style>
</head>

<body class="min-h-screen flex flex-col">

<!-- HEADER -->
<div class="bg-white shadow p-4">
  <div class="max-w-4xl mx-auto flex items-center gap-3 justify-center">
    <img src="A_header_section_for_the_&quot;Dr._Bhavna_–_Homeopathy_.png"
         class="w-12 h-12 rounded-full border"
         alt="Doctor Logo">
    <div>
      <h1 class="text-xl font-bold text-blue-700">
        Dr. Bhavna – Homeopathy Consultation System
      </h1>
      <p class="text-xs text-gray-500">
        Classical Homeopathy • Patient Record Management
      </p>
    </div>
  </div>
</div>

<!-- CHAT -->
<div id="chat" class="chat max-w-4xl mx-auto p-4 flex flex-col"></div>

<!-- INPUT -->
<div class="bg-white p-4 shadow max-w-4xl mx-auto w-full">
  <input id="msg" class="border rounded w-full px-3 py-2 mb-2"
         placeholder="लक्षण लिखें / Type symptoms (Hindi or English)">
  <div class="flex gap-2">
    <button onclick="askBot()" class="bg-blue-600 text-white px-4 py-2 rounded w-full">
      Ask Doctor
    </button>
    <button onclick="clearChat()" class="bg-red-500 text-white px-4 py-2 rounded">
      Clear
    </button>
  </div>
</div>

<!-- PATIENT FORM -->
<div class="max-w-4xl mx-auto mt-6 bg-white p-4 rounded shadow">
<h3 class="font-bold mb-3">Patient Complaint</h3>
<input id="pname" class="border p-2 w-full mb-2 rounded" placeholder="Patient Name">
<input id="pmobile" class="border p-2 w-full mb-2 rounded" placeholder="Mobile">
<input id="page" class="border p-2 w-full mb-2 rounded" placeholder="Age">
<textarea id="paddress" class="border p-2 w-full mb-2 rounded" placeholder="Address"></textarea>
<textarea id="pcomplaint" class="border p-2 w-full mb-2 rounded" placeholder="Main Complaint"></textarea>
<button onclick="savePatient()" class="bg-green-600 text-white px-4 py-2 rounded w-full">
Save Patient
</button>
</div>

<footer class="mt-auto bg-white p-4 text-center text-xs text-gray-600">
<strong>Disclaimer:</strong> For clinical reference only
</footer>

<script>
/* ================= CHAT UI ================= */
const chat = document.getElementById("chat");

function addMsg(text,type="bot"){
 const row=document.createElement("div");
 row.className=`row ${type}`;
 const av=document.createElement("div");
 av.className=`avatar ${type==="bot"?"botA":"userA"}`;
 av.textContent=type==="bot"?"Dr":"You";
 const b=document.createElement("div");
 b.className="bubble";
 b.innerText=text;
 row.append(av,b);
 chat.appendChild(row);
 chat.scrollTop=chat.scrollHeight;
}

/* ================= HOMEOPATHY ENGINE ================= */
const remedies=[
 {
  keys:["fever","cold","जुकाम","बुखार"],
  med:"Aconitum napellus",
  reason:"Sudden fever, cold after exposure to cold air"
 },
 {
  keys:["headache","migraine","सिर दर्द"],
  med:"Belladonna",
  reason:"Throbbing headache, heat, redness"
 },
 {
  keys:["cough","खांसी","bronchitis"],
  med:"Bryonia alba",
  reason:"Dry cough, worse on motion"
 },
 {
  keys:["diarrhea","loose motion","दस्त"],
  med:"Podophyllum",
  reason:"Watery diarrhea, weakness"
 },
 {
  keys:["anxiety","fear","घबराहट"],
  med:"Arsenicum album",
  reason:"Restlessness, anxiety, weakness"
 }
];

function findMedicine(text){
 text=text.toLowerCase();
 for(let r of remedies){
  if(r.keys.some(k=>text.includes(k))){
   return `Suggested Remedy: ${r.med}\nReason: ${r.reason}\n⚠️ Dose as per physician.`;
  }
 }
 return "No exact match found. Please consult doctor for detailed case taking.";
}

/* ================= BOT ================= */
function askBot(){
 const t=msg.value.trim();
 if(!t)return;
 addMsg(t,"user");
 setTimeout(()=>{
  addMsg(findMedicine(t),"bot");
 },500);
 msg.value="";
}

function clearChat(){
 chat.innerHTML="";
}

/* ================= PATIENT SAVE ================= */
let patients=[];
function savePatient(){
 if(!pname.value||!pmobile.value||!page.value||!paddress.value||!pcomplaint.value){
  alert("Fill all fields");return;
 }
 patients.push({
  name:pname.value,
  mobile:pmobile.value,
  age:page.value,
  address:paddress.value,
  complaint:pcomplaint.value,
  date:new Date().toLocaleString()
 });
 alert("Patient saved");
 pname.value=pmobile.value=page.value=paddress.value=pcomplaint.value="";
}
</script>

</body>
</html>
