<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dr. Bhavna Homeopathy</title>

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{background:#f1f5f9}
.panel{background:#ffffff;border-radius:16px;padding:24px;box-shadow:0 8px 22px rgba(0,0,0,.06)}
.card{background:#f8fafc;border-left:6px solid #2563eb;padding:16px;border-radius:12px;margin-top:14px}
.badge{background:#e0e7ff;color:#1e3a8a;padding:3px 8px;border-radius:999px;font-size:12px;margin:2px;display:inline-block}
.logo{
 width:46px;height:46px;border-radius:50%;
 background:linear-gradient(135deg,#2563eb,#16a34a);
 color:#fff;font-weight:bold;font-size:18px;
 display:flex;align-items:center;justify-content:center
}
.hidden{display:none}
</style>
</head>

<body class="min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-white shadow">
 <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
  <div class="flex items-center gap-3">
   <div class="logo">DB</div>
   <h1 class="text-xl font-extrabold text-blue-700">
    Dr. Bhavna Homeopathy
   </h1>
  </div>
  <button onclick="toggleLang()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">
   ğŸŒ English / à¤¹à¤¿à¤‚à¤¦à¥€
  </button>
 </div>
</header>

<!-- DOCTOR LOGIN -->
<section class="max-w-6xl mx-auto px-6 py-6">
 <div class="panel bg-gray-100">
  <h2 class="font-bold text-red-600 mb-3">ğŸ” Doctor Admin Login</h2>
  <input id="adminUser" class="border p-3 rounded-xl w-full mb-2" placeholder="Username">
  <input id="adminPass" type="password" class="border p-3 rounded-xl w-full mb-2" placeholder="Password">
  <button onclick="adminLogin()" class="bg-red-600 text-white py-2 rounded-xl w-full">
   Login
  </button>
 </div>
</section>

<!-- MAIN -->
<main class="max-w-6xl mx-auto px-6 py-8 grid grid-cols-1 md:grid-cols-2 gap-6">

<!-- LEFT : SYMPTOMS (PUBLIC) -->
<section class="panel">
 <h2 id="symTitle" class="font-bold text-lg mb-3">ğŸ” Enter Your Symptoms</h2>

 <div class="flex gap-2">
  <textarea id="symptomInput" class="border rounded-xl p-3 w-full h-28"
   placeholder="fever, headache, anxiety, burning"></textarea>
  <button onclick="voiceInput('symptom')" class="bg-green-600 text-white px-3 rounded-xl">ğŸ¤</button>
 </div>

 <button onclick="searchMedicine()" class="mt-4 bg-blue-600 text-white py-2 rounded-xl w-full">
  Analyze Symptoms
 </button>

 <div id="medicineResult"></div>
</section>

<!-- RIGHT : PATIENT DETAILS (DOCTOR ONLY) -->
<section id="patientPanel" class="panel hidden">
 <h2 id="patTitle" class="font-bold text-lg mb-3">ğŸ“ Patient Details (Doctor Only)</h2>

 <input id="pname" class="border p-3 rounded-xl w-full mb-2" placeholder="Patient Name">
 <input id="page" class="border p-3 rounded-xl w-full mb-2" placeholder="Age">
 <input id="pmobile" class="border p-3 rounded-xl w-full mb-2" placeholder="Mobile Number">

 <textarea id="paddress" class="border p-3 rounded-xl w-full mb-2"
  placeholder="Address"></textarea>

 <label id="compLabel" class="font-semibold text-sm">Complaint</label>
 <div class="flex gap-2 mt-1">
  <textarea id="pcomplaint" class="border p-3 rounded-xl w-full h-24"
   placeholder="Describe complaint"></textarea>
  <button onclick="voiceInput('complaint')" class="bg-green-600 text-white px-3 rounded-xl">ğŸ¤</button>
 </div>

 <button onclick="submitCase()" class="mt-4 bg-green-600 text-white py-2 rounded-xl w-full">
  Generate Patient PDF
 </button>
</section>

</main>

<!-- FOOTER -->
<footer id="disclaimer" class="bg-white border-t mt-auto text-xs text-gray-500 text-center p-4">
 âš  This tool provides preliminary homeopathic suggestions only.
 Final medicine selection must be done by Dr. bhavna homeopathic physician.
</footer>

<script>
/* ================= LANGUAGE ================= */
let lang="en";
function toggleLang(){
 lang = lang==="en" ? "hi" : "en";
 symTitle.innerText = lang==="en" ? "ğŸ” Enter Your Symptoms" : "ğŸ” à¤…à¤ªà¤¨à¥‡ à¤²à¤•à¥à¤·à¤£ à¤²à¤¿à¤–à¥‡à¤‚";
 patTitle.innerText = lang==="en" ? "ğŸ“ Patient Details (Doctor Only)" : "ğŸ“ à¤°à¥‹à¤—à¥€ à¤µà¤¿à¤µà¤°à¤£ (à¤•à¥‡à¤µà¤² à¤¡à¥‰à¤•à¥à¤Ÿà¤°)";
 compLabel.innerText = lang==="en" ? "Complaint" : "à¤¶à¤¿à¤•à¤¾à¤¯à¤¤";
 symptomInput.placeholder = lang==="en" ? "fever, headache, anxiety" : "à¤¬à¥à¤–à¤¾à¤°, à¤¸à¤¿à¤° à¤¦à¤°à¥à¤¦, à¤˜à¤¬à¤°à¤¾à¤¹à¤Ÿ";
 pcomplaint.placeholder = lang==="en" ? "Describe complaint" : "à¤¶à¤¿à¤•à¤¾à¤¯à¤¤ à¤¬à¤¤à¤¾à¤à¤‚";
 disclaimer.innerText = lang==="en"
  ? "âš  This tool provides preliminary homeopathic suggestions only. Final medicine selection must be done by Dr. bhavna ."
  : "âš  à¤¯à¤¹ à¤‰à¤ªà¤•à¤°à¤£ à¤•à¥‡à¤µà¤² à¤ªà¥à¤°à¤¾à¤°à¤‚à¤­à¤¿à¤• à¤¹à¥‹à¤®à¥à¤¯à¥‹à¤ªà¥ˆà¤¥à¤¿à¤• à¤¸à¥à¤à¤¾à¤µ à¤¦à¥‡à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤…à¤‚à¤¤à¤¿à¤® à¤¦à¤µà¤¾ à¤•à¤¾ à¤šà¤¯à¤¨ à¤šà¤¿à¤•à¤¿à¤¤à¥à¤¸à¤• à¤¦à¥à¤µà¤¾à¤°à¤¾ à¤•à¤¿à¤¯à¤¾ à¤œà¤¾à¤à¤—à¤¾à¥¤";
}

/* ================= VOICE ================= */
function voiceInput(target){
 const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
 if(!SR){ alert("Voice not supported"); return; }
 const rec = new SR();
 rec.lang = lang==="hi" ? "hi-IN" : "en-IN";
 rec.start();
 rec.onresult = e=>{
  const text = e.results[0][0].transcript;
  if(target==="symptom") symptomInput.value = text;
  if(target==="complaint") pcomplaint.value = text;
 };
}

/* ================= LOGIN ================= */
function adminLogin(){
 if(adminUser.value==="admin" && adminPass.value==="admin123"){
  patientPanel.classList.remove("hidden");
  alert("Doctor logged in. Patient section unlocked.");
 } else alert("Invalid credentials");
}

/* ================= MEDICINES ================= */
const medicines=[
{
 name:"Belladonna",
 keys:["fever","headache","throbbing","heat"],
 keynotes:["Sudden onset","High fever","Throbbing pain","Red face","Heat","Sensitivity to light"]
},
{
 name:"Aconitum Napellus",
 keys:["fear","anxiety","cold","sudden"],
 keynotes:["Sudden illness","Fear of death","Restlessness","After cold exposure","Dry skin"]
},
{
 name:"Bryonia",
 keys:["pain","movement","dry","thirst"],
 keynotes:["Pain worse by motion","Dryness","Great thirst","Better rest","Irritable"]
},
{
 name:"Rhus Toxicodendron",
 keys:["joint","stiff","rest","movement"],
 keynotes:["Stiff after rest","Better by motion","Restless","Damp weather aggravation"]
},
{
 name:"Arsenicum Album",
 keys:["burning","weak","anxiety","restless"],
 keynotes:["Burning pains","Great weakness","Anxiety","Fastidious","Better warmth"]
},
{
 name:"Pulsatilla",
 keys:["cold","yellow","changeable","mild"],
 keynotes:["Mild temperament","Changeable symptoms","Yellow discharge","Better open air"]
}
];

let suggested=[];

/* ================= SEARCH ================= */
function searchMedicine(){
 const text=symptomInput.value.toLowerCase();
 medicineResult.innerHTML="";
 suggested=[];

 medicines.forEach(m=>{
  let matched=[];
  m.keys.forEach(k=>{ if(text.includes(k)) matched.push(k); });
  if(matched.length){
   suggested.push({...m,matched});
  }
 });

 suggested.sort((a,b)=>b.matched.length-a.matched.length);
 suggested = suggested.slice(0,6);

 suggested.forEach((m,i)=>{
  medicineResult.innerHTML+=`
   <div class="card">
    <b>${i+1}. ${m.name}</b>
    <div class="mt-1 text-sm">
     <b>Matched Symptoms:</b><br>
     ${m.matched.map(x=>`<span class="badge">${x}</span>`).join("")}
    </div>
    <div class="mt-2 text-sm">
     <b>Keynote Symptoms:</b>
     <ul class="list-disc ml-5 mt-1">
      ${m.keynotes.map(k=>`<li>${k}</li>`).join("")}
     </ul>
    </div>
   </div>
  `;
 });
}

/* ================= PDF ================= */
function submitCase(){
 if(!pname.value || !pmobile.value){
  alert("Please fill patient details");
  return;
 }
 const {jsPDF}=window.jspdf;
 const doc=new jsPDF();
 let y=20;

 doc.setFontSize(16);
 doc.text("Patient Case Submission",20,y); y+=10;

 doc.setFontSize(11);
 doc.text(`Name: ${pname.value}`,20,y); y+=6;
 doc.text(`Age: ${page.value}`,20,y); y+=6;
 doc.text(`Mobile: ${pmobile.value}`,20,y); y+=6;
 doc.text(`Address: ${paddress.value}`,20,y); y+=8;

 doc.text("Symptoms:",20,y); y+=6;
 doc.text(symptomInput.value,20,y); y+=10;

 doc.text("Complaint:",20,y); y+=6;
 doc.text(pcomplaint.value,20,y); y+=10;

 doc.text("Suggested Medicines (Symptom-based):",20,y); y+=6;
 suggested.forEach((m,i)=>{
  doc.text(`${i+1}. ${m.name}`,25,y);
  y+=6;
 });

 doc.setFontSize(9);
 doc.text("Final medicine selection to be done by doctor.",20,280);

 doc.save(`Patient_${Date.now()}.pdf`);
 alert("Patient case PDF generated for doctor review.");
}
</script>

</body>
</html>
